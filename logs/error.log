    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\profileUserController.js:158:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

If the above error is not helpful, you may want to try EJS-Lint:
https://github.com/RyanZim/EJS-Lint
Or, if you meant to create an async function, pass `async: true` as an option. | Stack: SyntaxError: Unexpected token 'else' in C:\Users\ASUS\Desktop\Nutrixo Project\views\user\profile.ejs while compiling ejs

If the above error is not helpful, you may want to try EJS-Lint:
https://github.com/RyanZim/EJS-Lint
Or, if you meant to create an async function, pass `async: true` as an option.
    at new Function (<anonymous>)
    at Template.compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12)
    at Object.compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:398:16)
    at handleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:235:18)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:16)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)

If the above error is not helpful, you may want to try EJS-Lint:
https://github.com/RyanZim/EJS-Lint
Or, if you meant to create an async function, pass `async: true` as an option. | Stack: SyntaxError: Unexpected token 'else' in C:\Users\ASUS\Desktop\Nutrixo Project\views\user\profile.ejs while compiling ejs

If the above error is not helpful, you may want to try EJS-Lint:
https://github.com/RyanZim/EJS-Lint
Or, if you meant to create an async function, pass `async: true` as an option.
    at new Function (<anonymous>)
    at Template.compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12)
    at Object.compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:398:16)
    at handleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:235:18)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:16)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:752:19
    at Array.forEach (<anonymous>)
    at Template.generateSource (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:742:15)
    at Template.compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:587:12)
    at Object.compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:398:16)
    at handleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:235:18)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:16)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\passwordUserController.js:13:99
    at asyncUtilWrap (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-async-handler\index.js:3:20)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:157:13)
    at checkSession (C:\Users\ASUS\Desktop\Nutrixo Project\middlewares\checkSession.js:10:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    372|   }
    373| 
 >> 374|   <% if (error === 'stock') { %>
    375|   toastr.warning('Some items were removed because they are out of stock.');
    376|   <% } %>
    377| 

error is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\cart.ejs:374
    372|   }
    373| 
 >> 374|   <% if (error === 'stock') { %>
    375|   toastr.warning('Some items were removed because they are out of stock.');
    376|   <% } %>
    377| 

error is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:84:8)
    at cart (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at res.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:77:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\cartUserController.js:135:9
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\checkoutUserController.js:33:28
    at Array.filter (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\checkoutUserController.js:27:29
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\checkoutUserController.js:33:28
    at Array.filter (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\checkoutUserController.js:27:29
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    372|   }
    373| 
 >> 374|   <% if (error === 'stock') { %>
    375|   toastr.warning('Some items were removed because they are out of stock.');
    376|   <% } %>
    377| 

error is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\cart.ejs:374
    372|   }
    373| 
 >> 374|   <% if (error === 'stock') { %>
    375|   toastr.warning('Some items were removed because they are out of stock.');
    376|   <% } %>
    377| 

error is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:84:8)
    at cart (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at res.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:77:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\cartUserController.js:83:20
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\checkoutUserController.js:121:25
    at Array.forEach (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\checkoutUserController.js:120:18
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\checkoutUserController.js:121:82
    at Array.find (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\checkoutUserController.js:121:51
    at Array.forEach (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\checkoutUserController.js:120:18
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\checkoutUserController.js:121:82
    at Array.find (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\checkoutUserController.js:121:51
    at Array.forEach (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\checkoutUserController.js:120:18
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    375|     toastr.error('Some items are completely out of stock and were removed.');
    376|   <% } else if (error === 'stockUpdate') { %>
 >> 377|     const productList = "<%= decodeURIComponent(products || '') %>";
    378|     if (productList) {
    379|       toastr.warning(`Stock updated for: ${productList}`);
    380|     } else {

products is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\cart.ejs:377
    375|     toastr.error('Some items are completely out of stock and were removed.');
    376|   <% } else if (error === 'stockUpdate') { %>
 >> 377|     const productList = "<%= decodeURIComponent(products || '') %>";
    378|     if (productList) {
    379|       toastr.warning(`Stock updated for: ${productList}`);
    380|     } else {

products is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:90:45)
    at cart (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at res.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:77:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\cartUserController.js:130:9
    37|                         <p class="text-sm text-gray-600">
    38|                           Delivering to: 
 >> 39|                           <%= order.orderAddress.fullname %>, 
    40|                           <%= order.orderAddress.address %>, 
    41|                           <%= order.orderAddress.district %>, 
    42|                           <%= order.orderAddress.state %>, 

Cannot read properties of null (reading 'fullname') | Stack: TypeError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\order.ejs:39
    37|                         <p class="text-sm text-gray-600">
    38|                           Delivering to: 
 >> 39|                           <%= order.orderAddress.fullname %>, 
    40|                           <%= order.orderAddress.address %>, 
    41|                           <%= order.orderAddress.district %>, 
    42|                           <%= order.orderAddress.state %>, 

Cannot read properties of null (reading 'fullname')
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:44:45)
    at Array.forEach (<anonymous>)
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:27:20)
    at Array.forEach (<anonymous>)
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:18:15)
    at order (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    37|                         <p class="text-sm text-gray-600">
    38|                           Delivering to: 
 >> 39|                           <%= order.orderAddress.fullname %>, 
    40|                           <%= order.orderAddress.address %>, 
    41|                           <%= order.orderAddress.district %>, 
    42|                           <%= order.orderAddress.state %>, 

Cannot read properties of null (reading 'fullname') | Stack: TypeError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\order.ejs:39
    37|                         <p class="text-sm text-gray-600">
    38|                           Delivering to: 
 >> 39|                           <%= order.orderAddress.fullname %>, 
    40|                           <%= order.orderAddress.address %>, 
    41|                           <%= order.orderAddress.district %>, 
    42|                           <%= order.orderAddress.state %>, 

Cannot read properties of null (reading 'fullname')
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:44:45)
    at Array.forEach (<anonymous>)
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:27:20)
    at Array.forEach (<anonymous>)
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:18:15)
    at order (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    37|                         <p class="text-sm text-gray-600">
    38|                           Delivering to: 
 >> 39|                           <%= order.orderAddress.fullname %>, 
    40|                           <%= order.orderAddress.address %>, 
    41|                           <%= order.orderAddress.district %>, 
    42|                           <%= order.orderAddress.state %>, 

Cannot read properties of null (reading 'fullname') | Stack: TypeError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\order.ejs:39
    37|                         <p class="text-sm text-gray-600">
    38|                           Delivering to: 
 >> 39|                           <%= order.orderAddress.fullname %>, 
    40|                           <%= order.orderAddress.address %>, 
    41|                           <%= order.orderAddress.district %>, 
    42|                           <%= order.orderAddress.state %>, 

Cannot read properties of null (reading 'fullname')
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:44:45)
    at Array.forEach (<anonymous>)
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:27:20)
    at Array.forEach (<anonymous>)
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:18:15)
    at order (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Document.invalidate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3354:32)
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3115:17
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\schemaType.js:1410:9
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
    at Document.invalidate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3354:32)
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3115:17
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\schemaType.js:1410:9
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-10-27 13:48:26 [error] : Unhandled error: Assignment to constant variable. | Stack: TypeError: Assignment to constant variable.
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\profileUserController.js:31:24
    at asyncUtilWrap (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-async-handler\index.js:3:20)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:157:13)
    at checkSession (C:\Users\ASUS\Desktop\Nutrixo Project\middlewares\checkSession.js:10:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-10-27 13:50:01 [error] : Unhandled error: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\address.ejs:145
    143| 
    144| <%-include('../partials/addressModal.ejs') %>
 >> 145| <%- include('../partials/pagination.ejs',{currentPage,totalPages,query}) %>
    146| 
    147| <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    148| <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

currentPage is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\address.ejs:145
    143| 
    144| <%-include('../partials/addressModal.ejs') %>
 >> 145| <%- include('../partials/pagination.ejs',{currentPage,totalPages,query}) %>
    146| 
    147| <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    148| <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

currentPage is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:97:55)
    at address (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at res.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:77:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\profileUserController.js:38:9
2025-10-27 18:23:25 [error] : Unhandled error: startX is not defined | Stack: ReferenceError: startX is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:117:30
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-10-27 18:27:47 [error] : Unhandled error: summaryX is not defined | Stack: ReferenceError: summaryX is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:150:33
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-10-28 17:42:07 [error] : Unhandled error: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\trackingPage.ejs:19
    17| 
    18|         <!-- Orders Section -->
 >> 19|         <% if (orders && orders.length > 0) { %>
    20|           <div class="space-y-8">
    21|             <% orders.forEach(order => { %>
    22|               <!-- Each Order Card -->

orders is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\trackingPage.ejs:19
    17| 
    18|         <!-- Orders Section -->
 >> 19|         <% if (orders && orders.length > 0) { %>
    20|           <div class="space-y-8">
    21|             <% orders.forEach(order => { %>
    22|               <!-- Each Order Card -->

orders is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:15:8)
    at trackingPage (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at res.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:77:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:45:9
2025-10-28 17:45:35 [error] : Unhandled error: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\trackingPage.ejs:19
    17| 
    18|         <!-- Orders Section -->
 >> 19|         <% if (orders && orders.length > 0) { %>
    20|           <div class="space-y-8">
    21|             <% orders.forEach(order => { %>
    22|               <!-- Each Order Card -->

orders is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\trackingPage.ejs:19
    17| 
    18|         <!-- Orders Section -->
 >> 19|         <% if (orders && orders.length > 0) { %>
    20|           <div class="space-y-8">
    21|             <% orders.forEach(order => { %>
    22|               <!-- Each Order Card -->

orders is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:15:8)
    at trackingPage (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at res.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:77:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:45:9
2025-10-28 17:45:39 [error] : Unhandled error: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\trackingPage.ejs:19
    17| 
    18|         <!-- Orders Section -->
 >> 19|         <% if (orders && orders.length > 0) { %>
    20|           <div class="space-y-8">
    21|             <% orders.forEach(order => { %>
    22|               <!-- Each Order Card -->

orders is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\trackingPage.ejs:19
    17| 
    18|         <!-- Orders Section -->
 >> 19|         <% if (orders && orders.length > 0) { %>
    20|           <div class="space-y-8">
    21|             <% orders.forEach(order => { %>
    22|               <!-- Each Order Card -->

orders is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:15:8)
    at trackingPage (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at res.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:77:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:45:9
2025-10-29 00:01:53 [error] : Unhandled error: Order validation failed: items.0.status: `CANCELLATION REQUESTED` is not a valid enum value for path `status`. | Stack: ValidationError: Order validation failed: items.0.status: `CANCELLATION REQUESTED` is not a valid enum value for path `status`.
    at Document.invalidate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3354:32)
    at Subdocument.invalidate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\types\subdocument.js:229:12)
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3115:17
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\schemaType.js:1410:9
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-10-29 22:29:10 [error] : Unhandled error: paymentStatus is not defined | Stack: ReferenceError: paymentStatus is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\orderAdminController.js:19:5
    at asyncUtilWrap (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-async-handler\index.js:3:20)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:157:13)
    at checkAdminSession (C:\Users\ASUS\Desktop\Nutrixo Project\middlewares\checkSession.js:30:9)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:117:3)
    at handle (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
2025-10-29 22:31:02 [error] : Unhandled error: The comparison function must be either a function or undefined: #<Object> | Stack: TypeError: The comparison function must be either a function or undefined: #<Object>
    at Array.toSorted (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\orderAdminController.js:25:72
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-10-29 22:34:27 [error] : Unhandled error: The comparison function must be either a function or undefined: #<Object> | Stack: TypeError: The comparison function must be either a function or undefined: #<Object>
    at Array.sort (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\orderAdminController.js:25:72
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-10-29 22:36:15 [error] : Unhandled error: C:\Users\ASUS\Desktop\Nutrixo Project\views\admin\order.ejs:74
    72|             </tr>
    73|           <% } else { %>
 >> 74|             <% orders.forEach(order => { 
    75|               const hasCancelReq = order.items.some(item => item.status === "CANCELLATION REQUESTED");
    76|               const hasReturnReq = order.items.some(item => item.returnRequest?.status === "REQUESTED");
    77|             %>

orders.forEach is not a function | Stack: TypeError: C:\Users\ASUS\Desktop\Nutrixo Project\views\admin\order.ejs:74
    72|             </tr>
    73|           <% } else { %>
 >> 74|             <% orders.forEach(order => { 
    75|               const hasCancelReq = order.items.some(item => item.status === "CANCELLATION REQUESTED");
    76|               const hasReturnReq = order.items.some(item => item.returnRequest?.status === "REQUESTED");
    77|             %>

orders.forEach is not a function
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:39:15)
    at order (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at res.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:77:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\orderAdminController.js:27:9
2025-10-29 22:38:42 [error] : Unhandled error: Failed to lookup view "layout" in views directory "C:\Users\ASUS\Desktop\Nutrixo Project\views" | Stack: Error: Failed to lookup view "layout" in views directory "C:\Users\ASUS\Desktop\Nutrixo Project\views"
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:562:17)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:113:20
    at renderTick (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:154:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-10-29 23:18:46 [error] : Unhandled error: page is not defined | Stack: ReferenceError: page is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\orderAdminController.js:26:34
    at asyncUtilWrap (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-async-handler\index.js:3:20)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:157:13)
    at checkAdminSession (C:\Users\ASUS\Desktop\Nutrixo Project\middlewares\checkSession.js:30:9)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:117:3)
    at handle (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
2025-10-29 23:20:13 [error] : Unhandled error: totalOrders is not defined | Stack: ReferenceError: totalOrders is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\orderAdminController.js:30:34
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-10-30 14:20:03 [error] : Unhandled error: Cast to ObjectId failed for value "{ orderId: '690255497b71e7be12205da2' }" (type Object) at path "_id" for model "Order" | Stack: CastError: Cast to ObjectId failed for value "{ orderId: '690255497b71e7be12205da2' }" (type Object) at path "_id" for model "Order"
    at SchemaObjectId.cast (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\schema\objectId.js:251:11)
    at SchemaType.applySetters (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\schemaType.js:1258:12)
    at SchemaType.castForQuery (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\schemaType.js:1676:17)
    at cast (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\cast.js:319:34)
    at Query.cast (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\query.js:5055:12)
    at Query._castConditions (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\query.js:2351:10)
    at model.Query._findOne (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\query.js:2674:8)
    at model.Query.exec (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\query.js:4604:80)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\orderAdminController.js:40:19
2025-10-30 14:23:03 [error] : Unhandled error: Cannot populate path `item.product` because it is not in your schema. Set the `strictPopulate` option to false to override. | Stack: StrictPopulateError: Cannot populate path `item.product` because it is not in your schema. Set the `strictPopulate` option to false to override.
    at getModelsMapForPopulate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:50:12)
    at _populatePath (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\model.js:4469:21)
    at Function.populate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\model.js:4436:21)
    at Query._completeOne (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\query.js:2617:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\query.js:2689:10
    at new Promise (<anonymous>)
    at model.Query._findOne (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\query.js:2688:10)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async model.Query.exec (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\query.js:4604:63)
    at async C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\orderAdminController.js:40:19
2025-10-31 10:29:24 [error] : Unhandled error: all is not defined | Stack: ReferenceError: all is not defined
    at model.<anonymous> (C:\Users\ASUS\Desktop\Nutrixo Project\models\orderSchema.js:128:3)
    at callMiddlewareFunction (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\kareem\index.js:628:27)
    at model.next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\kareem\index.js:93:7)
    at _next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\kareem\index.js:146:10)
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\kareem\index.js:653:30
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-10-31 10:29:43 [error] : Unhandled error: all is not defined | Stack: ReferenceError: all is not defined
    at model.<anonymous> (C:\Users\ASUS\Desktop\Nutrixo Project\models\orderSchema.js:128:3)
    at callMiddlewareFunction (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\kareem\index.js:628:27)
    at model.next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\kareem\index.js:93:7)
    at _next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\kareem\index.js:146:10)
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\kareem\index.js:653:30
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-11-01 02:55:27 [error] : Unhandled error: Invalid or unexpected token in C:\Users\ASUS\Desktop\Nutrixo Project\views\user\trackingPage.ejs while compiling ejs

If the above error is not helpful, you may want to try EJS-Lint:
https://github.com/RyanZim/EJS-Lint
Or, if you meant to create an async function, pass `async: true` as an option. | Stack: SyntaxError: Invalid or unexpected token in C:\Users\ASUS\Desktop\Nutrixo Project\views\user\trackingPage.ejs while compiling ejs

If the above error is not helpful, you may want to try EJS-Lint:
https://github.com/RyanZim/EJS-Lint
Or, if you meant to create an async function, pass `async: true` as an option.
    at new Function (<anonymous>)
    at Template.compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12)
    at Object.compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:398:16)
    at handleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:235:18)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:16)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
2025-11-01 03:12:47 [error] : Unhandled error: subtotal is not defined | Stack: ReferenceError: subtotal is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:234:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:12:48 [error] : Unhandled error: subtotal is not defined | Stack: ReferenceError: subtotal is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:234:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:12:53 [error] : Unhandled error: subtotal is not defined | Stack: ReferenceError: subtotal is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:234:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:14:06 [error] : Unhandled error: subTotal is not defined | Stack: ReferenceError: subTotal is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:222:9
    at Array.forEach (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:190:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:14:07 [error] : Unhandled error: subTotal is not defined | Stack: ReferenceError: subTotal is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:222:9
    at Array.forEach (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:190:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:14:12 [error] : Unhandled error: subTotal is not defined | Stack: ReferenceError: subTotal is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:222:9
    at Array.forEach (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:190:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:14:35 [error] : Unhandled error: tax is not defined | Stack: ReferenceError: tax is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:240:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:14:36 [error] : Unhandled error: tax is not defined | Stack: ReferenceError: tax is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:240:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:14:41 [error] : Unhandled error: tax is not defined | Stack: ReferenceError: tax is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:240:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:15:12 [error] : Unhandled error: tax is not defined | Stack: ReferenceError: tax is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:240:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:19:08 [error] : Unhandled error: startX is not defined | Stack: ReferenceError: startX is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:174:28
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:19:09 [error] : Unhandled error: startX is not defined | Stack: ReferenceError: startX is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:174:28
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:19:14 [error] : Unhandled error: startX is not defined | Stack: ReferenceError: startX is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:174:28
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-01 03:19:45 [error] : Unhandled error: startX is not defined | Stack: ReferenceError: startX is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\orderUserController.js:174:28
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-04 22:06:47 [error] : Unhandled error: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\product.ejs:108
    106|         <!-- Product Grid -->
    107|         <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
 >> 108|           <% products.forEach(variant => { 
    109|               const inWishlist = userWishlist?.includes(variant._id.toString());
    110|           %>
    111|             <a href="/products/<%= variant.productId %>?variant=<%= variant._id %>"

userWishlist is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\product.ejs:108
    106|         <!-- Product Grid -->
    107|         <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
 >> 108|           <% products.forEach(variant => { 
    109|               const inWishlist = userWishlist?.includes(variant._id.toString());
    110|           %>
    111|             <a href="/products/<%= variant.productId %>?variant=<%= variant._id %>"

userWishlist is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:105:34)
    at Array.forEach (<anonymous>)
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:104:17)
    at product (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
2025-11-04 22:42:08 [error] : Unhandled error: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\product.ejs:108
    106|         <!-- Product Grid -->
    107|         <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
 >> 108|           <% products.forEach(variant => { 
    109|               const inWishlist = userWishlist?.includes(variant._id.toString());
    110|           %>
    111|             <a href="/products/<%= variant.productId %>?variant=<%= variant._id %>"

userWishlist is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\product.ejs:108
    106|         <!-- Product Grid -->
    107|         <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
 >> 108|           <% products.forEach(variant => { 
    109|               const inWishlist = userWishlist?.includes(variant._id.toString());
    110|           %>
    111|             <a href="/products/<%= variant.productId %>?variant=<%= variant._id %>"

userWishlist is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:105:34)
    at Array.forEach (<anonymous>)
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:104:17)
    at product (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
2025-11-05 01:14:35 [error] : Unhandled error: wishlist validation failed: items.0.variant_id: Path `variant_id` is required. | Stack: ValidationError: wishlist validation failed: items.0.variant_id: Path `variant_id` is required.
    at Document.invalidate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3354:32)
    at Subdocument.invalidate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\types\subdocument.js:229:12)
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3115:17
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\schemaType.js:1410:9
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-11-05 01:14:45 [error] : Unhandled error: wishlist validation failed: items.0.variant_id: Path `variant_id` is required. | Stack: ValidationError: wishlist validation failed: items.0.variant_id: Path `variant_id` is required.
    at Document.invalidate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3354:32)
    at Subdocument.invalidate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\types\subdocument.js:229:12)
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3115:17
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\schemaType.js:1410:9
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-11-05 01:58:39 [error] : Unhandled error: wishlist validation failed: items.1.variant_id: Path `variant_id` is required. | Stack: ValidationError: wishlist validation failed: items.1.variant_id: Path `variant_id` is required.
    at Document.invalidate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3354:32)
    at Subdocument.invalidate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\types\subdocument.js:229:12)
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3115:17
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\schemaType.js:1410:9
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-11-05 03:01:52 [error] : Unhandled error: Cannot read properties of undefined (reading 'toString') | Stack: TypeError: Cannot read properties of undefined (reading 'toString')
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\productUserController.js:150:65
    at Array.map (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\productUserController.js:150:41
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 03:34:17 [error] : Unhandled error: wishList is not defined | Stack: ReferenceError: wishList is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:80:30
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 03:34:18 [error] : Unhandled error: wishList is not defined | Stack: ReferenceError: wishList is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:80:30
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:03 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:11 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:14 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:16 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:16 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:18 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:18 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:21 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:22 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:23 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:23 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:25 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:35 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 22:27:37 [error] : Unhandled error: wishlistLength is not defined | Stack: ReferenceError: wishlistLength is not defined
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:15
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-05 23:52:21 [error] : Unhandled error: Cannot read properties of undefined (reading 'toString') | Stack: TypeError: Cannot read properties of undefined (reading 'toString')
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\productUserController.js:197:65
    at Array.map (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\productUserController.js:197:41
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-06 13:41:15 [error] : Unhandled error: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\wishlist.ejs:83
    81|   </div>
    82| 
 >> 83|   <%- include('../partials/pagination.ejs', {currentPage, totalPages}) %>
    84| 
    85| <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    86| <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

C:\Users\ASUS\Desktop\Nutrixo Project\views\partials\pagination.ejs:1
 >> 1| <%
    2| const qs = Object.entries(query || {})
    3| .filter(([k,v]) => v && k !== 'page')
    4| .map(([k,v]) =>`${k}=${encodeURIComponent(v)}`)

query is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\wishlist.ejs:83
    81|   </div>
    82| 
 >> 83|   <%- include('../partials/pagination.ejs', {currentPage, totalPages}) %>
    84| 
    85| <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    86| <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

C:\Users\ASUS\Desktop\Nutrixo Project\views\partials\pagination.ejs:1
 >> 1| <%
    2| const qs = Object.entries(query || {})
    3| .filter(([k,v]) => v && k !== 'page')
    4| .map(([k,v]) =>`${k}=${encodeURIComponent(v)}`)

query is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:11:27)
    at pagination (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at include (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:701:39)
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:58:17)
    at wishlist (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
2025-11-06 13:42:34 [error] : Unhandled error: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\wishlist.ejs:83
    81|   </div>
    82| 
 >> 83|   <%- include('../partials/pagination.ejs', {currentPage, totalPages, query}) %>
    84| 
    85| <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    86| <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

query is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\wishlist.ejs:83
    81|   </div>
    82| 
 >> 83|   <%- include('../partials/pagination.ejs', {currentPage, totalPages, query}) %>
    84| 
    85| <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    86| <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

query is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:58:81)
    at wishlist (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at res.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:77:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:78:20
2025-11-06 13:44:06 [error] : Unhandled error: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\wishlist.ejs:83
    81|   </div>
    82| 
 >> 83|   <%- include('../partials/pagination.ejs', {currentPage, totalPages, query}) %>
    84| 
    85| <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    86| <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

totalPages is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\user\wishlist.ejs:83
    81|   </div>
    82| 
 >> 83|   <%- include('../partials/pagination.ejs', {currentPage, totalPages, query}) %>
    84| 
    85| <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    86| <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

totalPages is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:58:69)
    at wishlist (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at res.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:77:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\user\wishlistUserController.js:86:9
2025-11-06 23:29:37 [error] : Unhandled error: Cannot destructure property 'code' of 'req.body' as it is undefined. | Stack: TypeError: Cannot destructure property 'code' of 'req.body' as it is undefined.
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\couponAdminController.js:17:12
    at asyncUtilWrap (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-async-handler\index.js:3:20)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:157:13)
    at checkAdminSession (C:\Users\ASUS\Desktop\Nutrixo Project\middlewares\checkSession.js:30:9)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:117:3)
    at handle (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
2025-11-07 01:45:14 [error] : Unhandled error: (intermediate value).skip is not a function | Stack: TypeError: (intermediate value).skip is not a function
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\couponAdminController.js:12:70
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-07 15:19:47 [error] : Unhandled error: The comparison function must be either a function or undefined: #<Object> | Stack: TypeError: The comparison function must be either a function or undefined: #<Object>
    at Array.sort (<anonymous>)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\offerAdminController.js:13:41
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-09 21:06:11 [error] : Unhandled error: Offer.countDocuments is not a function | Stack: TypeError: Offer.countDocuments is not a function
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\offerAdminController.js:14:37
    at asyncUtilWrap (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-async-handler\index.js:3:20)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:157:13)
    at checkAdminSession (C:\Users\ASUS\Desktop\Nutrixo Project\middlewares\checkSession.js:30:9)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\route.js:117:3)
    at handle (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\router\lib\layer.js:152:17)
2025-11-10 00:59:26 [error] : Unhandled error: offer validation failed: product.0: Cast to [ObjectId] failed for value "[ Model { product } ]" (type string) at path "product.0" because of "CastError", category.0: Cast to [ObjectId] failed for value "[ Model { category } ]" (type string) at path "category.0" because of "CastError" | Stack: ValidationError: offer validation failed: product.0: Cast to [ObjectId] failed for value "[ Model { product } ]" (type string) at path "product.0" because of "CastError", category.0: Cast to [ObjectId] failed for value "[ Model { category } ]" (type string) at path "category.0" because of "CastError"
    at Document.invalidate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3354:32)
    at model.$set (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:1480:12)
    at model.$set (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:1132:16)
    at model.Document (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:178:12)
    at model.Model (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\model.js:127:12)
    at new model (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\model.js:4837:15)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\offerAdminController.js:73:22
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-10 01:25:14 [error] : Unhandled error: normalizeIds is not a function | Stack: TypeError: normalizeIds is not a function
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\offerAdminController.js:70:27
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-10 01:27:20 [error] : Unhandled error: offer validation failed: product.0: Cast to [ObjectId] failed for value "[\n' +
  "  'function model(doc, fields, skipId) {\\n' +\n" +
  `    "      model.hooks.execPreSync('createModel', doc);\\n" +\n` +
  "    '      if (!(this instanceof model)) {\\n' +\n" +
  "    '        return new model(doc, fields, skipId);\\n' +\n" +
  "    '      }\\n' +\n" +
  "    '      const discriminatorKey = model.schema.options.discriminatorKey;\\n' +\n" +
  "    '\\n' +\n" +
  "    '      if (model.discriminators == null || doc == null || doc[discriminatorKey] == null) {\\n' +\n" +
  "    '        Model.call(this, doc, fields, skipId);\\n' +\n" +
  "    '        return;\\n' +\n" +
  "    '      }\\n' +\n" +
  "    '\\n' +\n" +
  "    '      // If discriminator key is set, use the discriminator instead (gh-7586)\\n' +\n" +
  "    '      const Discriminator = model.discriminators[doc[discriminatorKey]] ||\\n' +\n" +
  "    '        getDiscriminatorByValue(model.discriminators, doc[discriminatorKey]);\\n' +\n" +
  "    '      if (Discriminator != null) {\\n' +\n" +
  "    '        return new Discriminator(doc, fields, skipId);\\n' +\n" +
  "    '      }\\n' +\n" +
  "    '\\n' +\n" +
  "    '      // Otherwise, just use the top-level model\\n' +\n" +
  "    '      Model.call(this, doc, fields, skipId);\\n' +\n" +
  "    '    }'\n" +
  ']" (type string) at path "product.0" because of "CastError", category.0: Cast to [ObjectId] failed for value "[\n' +
  "  'function model(doc, fields, skipId) {\\n' +\n" +
  `    "      model.hooks.execPreSync('createModel', doc);\\n" +\n` +
  "    '      if (!(this instanceof model)) {\\n' +\n" +
  "    '        return new model(doc, fields, skipId);\\n' +\n" +
  "    '      }\\n' +\n" +
  "    '      const discriminatorKey = model.schema.options.discriminatorKey;\\n' +\n" +
  "    '\\n' +\n" +
  "    '      if (model.discriminators == null || doc == null || doc[discriminatorKey] == null) {\\n' +\n" +
  "    '        Model.call(this, doc, fields, skipId);\\n' +\n" +
  "    '        return;\\n' +\n" +
  "    '      }\\n' +\n" +
  "    '\\n' +\n" +
  "    '      // If discriminator key is set, use the discriminator instead (gh-7586)\\n' +\n" +
  "    '      const Discriminator = model.discriminators[doc[discriminatorKey]] ||\\n' +\n" +
  "    '        getDiscriminatorByValue(model.discriminators, doc[discriminatorKey]);\\n' +\n" +
  "    '      if (Discriminator != null) {\\n' +\n" +
  "    '        return new Discriminator(doc, fields, skipId);\\n' +\n" +
  "    '      }\\n' +\n" +
  "    '\\n' +\n" +
  "    '      // Otherwise, just use the top-level model\\n' +\n" +
  "    '      Model.call(this, doc, fields, skipId);\\n' +\n" +
  "    '    }'\n" +
  ']" (type string) at path "category.0" because of "CastError" | Stack: ValidationError: offer validation failed: product.0: Cast to [ObjectId] failed for value "[\n' +
  "  'function model(doc, fields, skipId) {\\n' +\n" +
  `    "      model.hooks.execPreSync('createModel', doc);\\n" +\n` +
  "    '      if (!(this instanceof model)) {\\n' +\n" +
  "    '        return new model(doc, fields, skipId);\\n' +\n" +
  "    '      }\\n' +\n" +
  "    '      const discriminatorKey = model.schema.options.discriminatorKey;\\n' +\n" +
  "    '\\n' +\n" +
  "    '      if (model.discriminators == null || doc == null || doc[discriminatorKey] == null) {\\n' +\n" +
  "    '        Model.call(this, doc, fields, skipId);\\n' +\n" +
  "    '        return;\\n' +\n" +
  "    '      }\\n' +\n" +
  "    '\\n' +\n" +
  "    '      // If discriminator key is set, use the discriminator instead (gh-7586)\\n' +\n" +
  "    '      const Discriminator = model.discriminators[doc[discriminatorKey]] ||\\n' +\n" +
  "    '        getDiscriminatorByValue(model.discriminators, doc[discriminatorKey]);\\n' +\n" +
  "    '      if (Discriminator != null) {\\n' +\n" +
  "    '        return new Discriminator(doc, fields, skipId);\\n' +\n" +
  "    '      }\\n' +\n" +
  "    '\\n' +\n" +
  "    '      // Otherwise, just use the top-level model\\n' +\n" +
  "    '      Model.call(this, doc, fields, skipId);\\n' +\n" +
  "    '    }'\n" +
  ']" (type string) at path "product.0" because of "CastError", category.0: Cast to [ObjectId] failed for value "[\n' +
  "  'function model(doc, fields, skipId) {\\n' +\n" +
  `    "      model.hooks.execPreSync('createModel', doc);\\n" +\n` +
  "    '      if (!(this instanceof model)) {\\n' +\n" +
  "    '        return new model(doc, fields, skipId);\\n' +\n" +
  "    '      }\\n' +\n" +
  "    '      const discriminatorKey = model.schema.options.discriminatorKey;\\n' +\n" +
  "    '\\n' +\n" +
  "    '      if (model.discriminators == null || doc == null || doc[discriminatorKey] == null) {\\n' +\n" +
  "    '        Model.call(this, doc, fields, skipId);\\n' +\n" +
  "    '        return;\\n' +\n" +
  "    '      }\\n' +\n" +
  "    '\\n' +\n" +
  "    '      // If discriminator key is set, use the discriminator instead (gh-7586)\\n' +\n" +
  "    '      const Discriminator = model.discriminators[doc[discriminatorKey]] ||\\n' +\n" +
  "    '        getDiscriminatorByValue(model.discriminators, doc[discriminatorKey]);\\n' +\n" +
  "    '      if (Discriminator != null) {\\n' +\n" +
  "    '        return new Discriminator(doc, fields, skipId);\\n' +\n" +
  "    '      }\\n' +\n" +
  "    '\\n' +\n" +
  "    '      // Otherwise, just use the top-level model\\n' +\n" +
  "    '      Model.call(this, doc, fields, skipId);\\n' +\n" +
  "    '    }'\n" +
  ']" (type string) at path "category.0" because of "CastError"
    at Document.invalidate (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:3354:32)
    at model.$set (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:1480:12)
    at model.$set (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:1132:16)
    at model.Document (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\document.js:178:12)
    at model.Model (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\model.js:127:12)
    at new model (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\mongoose\lib\model.js:4837:15)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\offerAdminController.js:74:22
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-11-10 03:38:07 [error] : Unhandled error: Could not find matching close tag for "<%=". | Stack: Error: Could not find matching close tag for "<%=".
    at C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:752:19
    at Array.forEach (<anonymous>)
    at Template.generateSource (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:742:15)
    at Template.compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:587:12)
    at Object.compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:398:16)
    at handleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:235:18)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:16)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
2025-11-10 04:06:26 [error] : Unhandled error: C:\Users\ASUS\Desktop\Nutrixo Project\views\admin\offer.ejs:131
    129|         <label class="block text-sm font-medium text-gray-700 mb-2">Apply to Products</label>
    130|         <select id="editProductSelect" name="product" multiple>
 >> 131|           <% if (products && products.length > 0) { %>
    132|             <% products.forEach(prod => { %>
    133|               <option value="<%= prod.productId %>"><%= prod.title %></option>
    134|             <% }) %>

products is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\admin\offer.ejs:131
    129|         <label class="block text-sm font-medium text-gray-700 mb-2">Apply to Products</label>
    130|         <select id="editProductSelect" name="product" multiple>
 >> 131|           <% if (products && products.length > 0) { %>
    132|             <% products.forEach(prod => { %>
    133|               <option value="<%= prod.productId %>"><%= prod.title %></option>
    134|             <% }) %>

products is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:77:8)
    at offer (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at res.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:77:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\offerAdminController.js:22:9
2025-11-10 04:11:02 [error] : Unhandled error: C:\Users\ASUS\Desktop\Nutrixo Project\views\admin\offer.ejs:135
    133|         <label class="block text-sm font-medium text-gray-700 mb-2">Apply to Products</label>
    134|         <select id="editProductSelect" name="product" multiple>
 >> 135|           <% if (products && products.length > 0) { %>
    136|             <% products.forEach(prod => { %>
    137|               <option value="<%= prod.productId %>"><%= prod.title %></option>
    138|             <% }) %>

products is not defined | Stack: ReferenceError: C:\Users\ASUS\Desktop\Nutrixo Project\views\admin\offer.ejs:135
    133|         <label class="block text-sm font-medium text-gray-700 mb-2">Apply to Products</label>
    134|         <select id="editProductSelect" name="product" multiple>
 >> 135|           <% if (products && products.length > 0) { %>
    136|             <% products.forEach(prod => { %>
    137|               <option value="<%= prod.productId %>"><%= prod.title %></option>
    138|             <% }) %>

products is not defined
    at eval (eval at compile (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:77:8)
    at offer (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\view.js:139:8)
    at tryRender (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:627:10)
    at Function.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\application.js:574:3)
    at ServerResponse.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express\lib\response.js:909:7)
    at res.render (C:\Users\ASUS\Desktop\Nutrixo Project\node_modules\express-ejs-layouts\lib\express-layouts.js:77:18)
    at C:\Users\ASUS\Desktop\Nutrixo Project\controllers\admin\offerAdminController.js:22:9
